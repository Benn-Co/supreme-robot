
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.24.0/HERE_NOTICE
 */

 H.util.eval("R.prototype.O=ca(3,function(a){var b=this.getCache(),c=this;if(a!==y){C(a,Ek,R.prototype.O,0);var d=a}else d=il;d!==b&&b.ra(function(e,f,g){return c.ec(e)?(d.add(e,f,g),!0):!1});this.T=d});Sh.prototype.b=ca(2,function(a){this.i=a;a=this.getState();a!==Ph.INIT&&a!==Ph.LOADING&&$h(this)});function Ap(a,b){Wa.apply(null,arguments);return a}\nfunction Bp(a,b){b=void 0===b?{}:b;if(!a.kk)throw new Yc(a);Bp.l.constructor.call(this);var c=Cp(this,b);if(!c.baseUrl&&!c.platformBaseUrl)throw new D(a,0,'either \"baseUrl\" or \"platformBaseUrl\" must be specified');this.c=(c.baseUrl?c.baseUrl:c.platformBaseUrl).clone();a=c.baseUrl?b:c;a.host&&this.c.Jg(a.host);a.subDomain&&this.c.Ra(a.subDomain);a.path&&this.c.re(a.path);Dp(this.c);this.cf=c.headers||{}}u(Bp,F);t(\"H.service.Service\",Bp);function Cp(a,b){a=a.a();return b?Ap({},a,b):a}\nBp.prototype.a=function(){return{}};Bp.prototype.D=function(){return this.c};Bp.prototype.getUrl=Bp.prototype.D;Bp.prototype.F=function(a,b,c,d){d=new rf(void 0===d?\"application/json\":d,a.toString(),fe,{headers:this.cf});d.then(b,Ep(this,a,c));return d};function Ep(a,b,c){return function(d){return\"function\"!==typeof d.json?Promise.reject(c(Fp(b,d))):d.json().then(function(e){return c(a.b(e))},function(){return c(Fp(b,d))})}}Bp.prototype.b=function(a){return Error(a.message)};\nfunction Fp(a,b){return Error((b.statusText?\"[\"+b.statusText+\"] \":\"\")+a+\" request failed\")};function X(a,b,c,d,e,f){if(a&&b)this.tl(a),this.Jg(b),this.re(c),this.sl(e),this.il(f),this.Ri(d);else throw Error('Parameters \"scheme\" and \"host\" must be specified');}t(\"H.service.Url\",X);\nfunction Gp(a,b){var c=x.document,d,e=c&&c.createElement(\"a\"),f=\"\";if(c){if(b){var g=(d=c.getElementsByTagName(\"base\")[0])&&d.href;var h=c.head;var k=d||h.appendChild(c.createElement(\"base\"));k.href=b}e.href=a;f=e.href;b&&(d?d.href=g:h.removeChild(k))}else/[\\w]+:\\/\\//.test(a)&&(f=a);g=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(f);a=g[1];k=g[4];b=g[5];h=g[6];c=g[7];d=g[8];!g[2]&&k&&/@/.test(k)&&(k=k.split(\"@\")[1]);g=k;h=h&&0<h.length?h.substr(1):\n\"\";k={};if(c)for(e=/([?&]?([^=&+]+))(=([^&]+))?/g;f=e.exec(c);)k[decodeURIComponent(f[2])]=f[4]?decodeURIComponent(f[4]):void 0;return new X(a,g,h,k,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):\"\")}X.parse=Gp;var Hp=0;X.prototype.clone=function(){Hp++;var a={},b;for(b in this.a)a[b]=this.a[b];return new X(this.s,this.f,this.c,a,this.g,this.b)};X.prototype.clone=X.prototype.clone;\nX.prototype.tl=function(a){if(!a||\"string\"!==typeof a)throw Error('The \"scheme\" parameter must be a non-empty string.');this.s=a;return this};X.prototype.setScheme=X.prototype.tl;X.prototype.zn=function(){return this.s};X.prototype.getScheme=X.prototype.zn;X.prototype.Jg=function(a){if(!a||\"string\"!==typeof a||\"-\"===a.charAt(0)||\".\"===a.charAt(0)||\".\"===a.charAt(a.length-1))throw Error('The \"host\" parameter is not a valid host name.');this.f=a;return this};X.prototype.setHost=X.prototype.Jg;\nX.prototype.Sm=function(){return this.f};X.prototype.getHost=X.prototype.Sm;X.prototype.re=function(a){this.c=a||void 0;return this};X.prototype.setPath=X.prototype.re;X.prototype.mn=function(){return this.c};X.prototype.getPath=X.prototype.mn;X.prototype.Ri=function(a){if(a)if(\"object\"==typeof a)this.a=a;else throw Error('Parameter \"params\" must be an object.');else this.a={};return this};X.prototype.setQuery=X.prototype.Ri;X.prototype.ek=function(){return!Ip(this)};X.prototype.hasQuery=X.prototype.ek;\nX.prototype.getQuery=function(){return this.a};X.prototype.getQuery=X.prototype.getQuery;X.prototype.sl=function(a){if(a&&isNaN(parseInt(a,10)))throw Error('Parameter \"port\" must be a number or undefined');this.g=+a||void 0;return this};X.prototype.setPort=X.prototype.sl;X.prototype.qn=function(){return this.g};X.prototype.getPort=X.prototype.qn;X.prototype.il=function(a){this.b=a||void 0;return this};X.prototype.setAnchor=X.prototype.il;X.prototype.qd=function(){return this.b};\nX.prototype.getAnchor=X.prototype.qd;X.prototype.K=function(a){if(\"object\"!==typeof a)throw Error('Parameter \"other\" must be an object.');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&\"function\"!==typeof a[c]&&(b[c]=a[c]);return this};X.prototype.mergeQuery=X.prototype.K;X.prototype.Ra=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subDomain\" must be a non-empty string');\".\"===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.Jg(a+\".\"+this.f)};\nX.prototype.addSubDomain=X.prototype.Ra;X.prototype.G=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subPath\" must be a non-empty string');return this.re((this.c?this.c+\"/\":\"\")+a)};X.prototype.addSubPath=X.prototype.G;X.prototype.toString=function(){return[this.s+\"://\",this.f,this.g?\":\"+this.g:\"\",this.c||!Ip(this)||this.b?\"/\":\"\",this.c?encodeURI(this.c):\"\",Jp(this),this.b?\"#\"+encodeURIComponent(this.b):\"\"].join(\"\")};X.prototype.toString=X.prototype.toString;\nfunction Jp(a){var b=[],c,d=a.a,e;for(c in d)if(d.hasOwnProperty(c)&&\"function\"!==typeof d[c]){var f=a.a[c];if(C(f,Kp)){var g=0;var h=f.Il;for(e=h.length;g<e;)b.push(encodeURIComponent(c)+(void 0===f?\"\":\"=\"+encodeURIComponent(h[g]))),g++}else b.push(encodeURIComponent(c)+(void 0===f?\"\":\"=\"+encodeURIComponent(f)))}return 0<b.length?\"?\"+b.join(\"&\"):\"\"}function Dp(a){var b=Ef(\"H-service\",\"1.24.0\",\"165e5dd\");a.a.xnlp=\"CL_JSMv3.\"+b.version;return a}\nfunction Ip(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&\"function\"!==typeof a.a[b]&&(c++,0<c))break;return!c}function Kp(a){var b;if(!yc(a))throw new D(Kp,0,a);for(b=0;b<a.length;b++){var c=a[b];if(!zc(c)&&!Cc(c))throw new D(Kp,0,\"The array can only contain strings and numbers\");}this.Il=a}X.MultiValueQueryParameter=Kp;Kp.prototype.Jn=function(){return this.Il};Kp.prototype.getValues=Kp.prototype.Jn;function Y(a){a=Ap({},this.b,a);var b=a.apikey||a.apiKey,c=a.baseUrl;if(c=b?c?0:\"baseUrl\":\"apikey\")throw new D(Y,0,'\"'+c+'\" must be specified');this.ll(a.baseUrl);this.a=b;this.c.K({apikey:b});this.f=a.headers||{};this.g=Ua(a.servicesConfig||{})}t(\"H.service.Platform\",Y);Y.prototype.b={apikey:null,baseUrl:new X(\"https\",\"hereapi.com\")};Y.prototype.ll=function(a){this.c=Dp(a.clone());this.a=a=this.a;this.c.K({apikey:a})};Y.prototype.setBaseUrl=Y.prototype.ll;Y.prototype.fc=function(){return this.c};\nY.prototype.getBaseUrl=Y.prototype.fc;Y.prototype.Ya=function(a,b){try{return a.kk=!0,new a(Ap({platformBaseUrl:this.fc(),headers:this.f},this.g[a.CONFIG_KEY]||{},b||{}))}finally{delete a.kk}};Y.prototype.createService=Y.prototype.Ya;var Lp=Function(\"return this\")();rc(\"monospace serif\");function Mp(){}Mp.prototype.pop=function(a){this[a]||(this[a]=[]);return this[a].pop()||Lp.document.createElement(\"canvas\")};Mp.prototype.push=function(a,b){this[b]||(this[b]=[]);this[b].push(a)};var Np=new Mp;t(\"H.service.util.eval\",function(a){return eval(a)});function Op(){var a=decodeURIComponent(x.H.getScriptPath());a=a?\"/\"===a[a.length-1]?a.substring(0,a.length-1):a:\"https://js.api.here.com/v3/3.1.24.0\";return Gp(a).G(\"styles\")};function Pp(a,b,c){var d=this;c=c||{};var e=+c.min,f=+c.max;c.tileSize=c.tileSize||512;c.min=e?Yd(e,1,17):1;c.min+=Ck(c.tileSize,1);c.max=f?Yd(f,1,17):17;Pp.l.constructor.call(this,c);C(a,Qp,Pp,0);C(b,Oh,Pp,1);this.o=a;b.b&&b.b(\"OMV\");this.Rc(b,!0);this.s=function(){Sp(d);d.reload(!1)};a.addEventListener(\"versionupdate\",this.s);Sp(this);Pp.prototype.J=function(){var g=/^v2\\/vectortiles\\/(.+)\\/mc$/.exec(a.D().c);return g?g[1]:B+\"\"}()}u(Pp,R);t(\"H.service.omv.Provider\",Pp);\nfunction Sp(a){var b=a.vd(\"_#-;,:\",\"_#-;,:\",\"_#-;,:\");a.v=new RegExp(\"^\"+b.replace(/[.*+?^${}()|[\\]\\\\\\/]/g,\"\\\\$&\").replace(/_#-;,:/g,\"\\\\d+\")+\"$\")}Pp.prototype.ec=function(a){return this.v.test(a)};Pp.prototype.cacheFilter=Pp.prototype.ec;Pp.prototype.vd=function(a,b,c){return Tp(this.o,a,b,c).toString()};Pp.prototype.getTileKey=Pp.prototype.vd;Pp.prototype.Ob=function(){return this.N};Pp.prototype.getCache=Pp.prototype.Ob;Pp.prototype.MAX_STORE_TIME=2592E6;Pp.prototype.gh=function(){return md()};\nPp.prototype.be=function(){return md()?ld():Pp.l.be.call(this)};Pp.prototype.F=function(a,b,c,d,e){return this.o.ib(a,b,c,d,e)};Pp.prototype.requestInternal=Pp.prototype.F;Pp.prototype.qc=function(a){a.b&&a.b(\"OMV\");this.Rc(a)};Pp.prototype.setStyle=Pp.prototype.qc;Pp.prototype.ta=function(){return Pp.l.ub.apply(this)};Pp.prototype.getStyle=Pp.prototype.ta;\nPp.prototype.ub=function(){var a=Pp.l.ub.apply(this),b;this.C&&(a.getState()===Ph.READY?(b=a.rd())&&b.global&&(this.c&&(b.global.ux_language=this.c),this.a&&(b.global.ux_language_fallback=this.a),a=new Sh(b,a.fc())):a.load());return a};function Up(a,b,c){var d=a.ub().getState()===Ph.READY,e=zc(b),f=zc(c);e&&(a.c=b);f&&(a.a=c);if(e||f)a.C=!0,d&&a.f()}Pp.prototype.u=function(){Pp.l.u.call(this);this.o.removeEventListener(\"versionupdate\",this.s)};Pp.prototype.N=new Ek(256);\nPp.prototype.sa=function(a,b){return Vp(this.o.sa(),this.J,b,a)};Pp.prototype.getCopyrights=Pp.prototype.sa;function Qp(a){Qp.l.constructor.call(this,Qp,a);a=Cp(this,a).mapVersion;this.$e=tc(a)?a:Wp[this.D().toString()];tc(this.$e)||Xp(this)}u(Qp,Bp);t(\"H.service.omv.Service\",Qp);Qp.prototype.a=function(){return{subDomain:\"vector\",path:\"v2/vectortiles/base/mc\"}};Qp.CONFIG_KEY=\"omv\";var Wp={};Fc(Wp);Qp.prototype.cn=function(){return this.$e};Qp.prototype.getMapVersion=Qp.prototype.cn;\nfunction Xp(a){a.F(a.D().clone().G(\"../../info\"),function(b){b=b.mapVersion;var c=a.D().toString();a.$e=b;b!==Wp[c]&&(Wp[c]=b,a.dispatchEvent(\"versionupdate\"))},function(){})}Qp.prototype.nd=function(a,b){return new ml(new Pp(this,a,b),{max:22})};Qp.prototype.createLayer=Qp.prototype.nd;Qp.prototype.ib=function(a,b,c,d,e){return this.F(Tp(this,a,b,c),function(f){return f.arrayBuffer().then(d,e)},e,\"arraybuffer\")};\nfunction Tp(a,b,c,d){b=a.D().clone().G(d+\"/\"+b+\"/\"+c+\"/omv\");tc(a.$e)&&b.K({mv:a.$e});return b}Qp.prototype.eg=function(a){return Op().G(\"omv/\"+a+\".yaml\")};Qp.prototype.Eh=function(a,b){if(!Ca(a))throw new D(this.Eh,0,'\"onResult\" must be a function');if(!Ca(b))throw new D(this.Eh,1,'\"onError\" must be a function');return this.F(this.D().clone().re(\"v2/vectortiles/pviews\"),a,b)};Qp.prototype.getPoliticalViews=Qp.prototype.Eh;Y.prototype.Wj=function(a){return this.Ya(Qp,a)};\nY.prototype.getOMVService=Y.prototype.Wj;Qp.prototype.Me=function(){this.Yc=new Yp;this.F(this.D().clone().G(\"../../copyrights\"),A(this.bj,this),id)};Qp.prototype.bj=function(a){Zp(this.Yc,a);this.dispatchEvent(\"copyrightupdate\")};Qp.prototype.sa=function(){this.Yc||this.Me();return this.Yc};Qp.prototype.getCopyrights=Qp.prototype.sa;function Yp(){this.a={}}function Zp(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d,e=b[c],f=a.a[c]||(a.a[c]=[]),g=e.length;for(d=0;d<g;d++)f.push(new $p(e[d]))}}function Vp(a,b,c,d){var e=(a=a.a[b])?a.length:0,f=[];for(b=0;b<e;b++)a[b].xd(c,d)&&f.push(a[b]);return f}\nfunction $p(a){var b,c=a.boxes;this.label=a.label;this.min=a.minLevel;this.max=a.maxLevel;this.b=[];if(c&&(b=c.length)){var d=c[0];var e=new K(d[0],d[1],d[2],d[3]);this.b.push(e);this.a=new K(d[0],d[1],d[2],d[3]);for(a=1;a<b;a++)d=c[a],e=new K(d[0],d[1],d[2],d[3]),this.b.push(e),this.a.mc(e,!1,this.a)}}$p.prototype.xd=function(a,b){if(a>=this.min&&a<=this.max)if((a=this.b.length)&&this.a){if(this.a.xd(b))for(;a--;)if(this.b[a].xd(b))return!0}else return!0;return!1};function aq(a,b,c,d,e,f,g){var h=this;g=g||{};f=f?f:{};var k=a.D().clone().G(b+\"/\"+a.Cc()+\"/\"+c).K(f),l=a.Hh();this.J=a;this.V=k;tk.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(m,p,q){var r=h.V.clone();l&&r.Ra(l[(q+p+m)%l.length]);r.G(q+\"/\"+m+\"/\"+p+\"/\"+d+\"/\"+e);return r.toString()},crossOrigin:g.crossOrigin,headers:g.headers,uri:k.toString().replace(/_/g,\"\")+d});this.jb=b;this.s=c;this.a=f;this.yb=c.split(\".\")[0];this.ng=A(this.ng,this);this.getCopyrights=this.sa;a.addEventListener(\"versionupdate\",\nthis.ng)}u(aq,tk);aq.prototype.MAX_STORE_TIME=2592E6;n=aq.prototype;n.u=function(){tk.prototype.u.call(this);this.J.removeEventListener(\"versionupdate\",this.ng)};n.sa=function(a,b){return Vp(this.J.sa(),this.yb,b,a)};n.ng=function(){var a=this.J;this.V=a.D().clone().G(this.jb+\"/\"+a.Cc()+\"/\"+this.s).K(this.a);this.reload(!1)};n.gh=function(){return md()};n.be=function(){return md()?ld():aq.l.be.call(this)};function bq(a){bq.l.constructor.call(this,bq,a);a=Cp(this,a);this.$b=a.shards;(this.Pa=a.ignoreTypes?null:a.type)&&this.D().Ra(this.Pa);this.ac=a.version;this.Yc=new Yp;this.yi={};this.Of=0;\"newest\"===this.ac&&this.rh()}u(bq,Bp);t(\"H.service.MapTileService\",bq);bq.prototype.a=function(){return{subDomain:\"maps.ls\",path:\"maptile/2.1\",type:\"base\",version:\"newest\",shards:[\"1\",\"2\",\"3\",\"4\"]}};bq.CONFIG_KEY=\"maptile\";\nfunction cq(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}bq.prototype.Hh=function(){return this.$b};bq.prototype.$j=function(){return this.Pa};bq.prototype.getType=bq.prototype.$j;bq.prototype.Cc=function(){return this.ac};bq.prototype.getVersion=bq.prototype.Cc;bq.prototype.Vi=function(a){this.ac=a};bq.prototype.sa=function(){this.Of||(this.ac&&\"newest\"!==this.ac||\"traffic\"===this.Pa)&&this.Me();return this.Yc};bq.prototype.getCopyrights=bq.prototype.sa;n=bq.prototype;\nn.cj=function(a){a=a.response;var b;cq(a,\"map\");cq(a,\"scheme\");cq(a,\"tiletype\");cq(a,\"format\");cq(a,\"resolution\");cq(a,\"language\");if(\"newest\"===this.ac&&\"traffic\"!==this.Pa)for(b in a.maps)a.maps[b].hash&&a.maps[b].newest&&(this.Vi(a.maps[b].hash),this.dispatchEvent(\"versionupdate\"));this.Nh=a;this.dispatchEvent(\"infoupdate\")};n.bj=function(a){Zp(this.Yc,a);this.dispatchEvent(\"copyrightupdate\")};\nn.rh=function(){var a=this;var b=this.D().clone().G(\"info\").K({output:\"json\"});this.$b&&b.Ra(this.$b[0]);this.F(b,function(c){a.cj(c)},function(c){throw c;})};n.Me=function(){var a=this;var b=this.D().clone().G(\"copyright\").G(a.Cc()).K({output:\"json\"});this.$b&&b.Ra(this.$b[0]);this.Of=1;this.F(b,function(c){a.Of=2;a.bj(c)},function(c){a.Of=-1;throw c;})};n.zh=function(){return this.Nh};bq.prototype.getInfo=bq.prototype.zh;\nbq.prototype.He=function(a,b,c,d,e,f){var g=this.D().clone().G(a+\"/\"+this.Cc()+\"/\"+b+\"/\"+c+\"/\"+d).K(e?e:{}).toString();var h=0,k,l=g.length;if(0!==l)for(k=0;k<l;k++){var m=g.charCodeAt(k);h=(h<<5)-h+m;h|=0}g=h;h=this.yi[g];h||(h=new aq(this,a,b,c,d,e,Ap({headers:this.cf},f||{})),this.yi[g]=h);return h};bq.prototype.createTileProvider=bq.prototype.He;bq.prototype.vc=function(a,b,c,d,e,f,g,h){a=this.He(a,b,c,d,e,h);return new ml(a,{opacity:f,dark:!!g})};bq.prototype.createTileLayer=bq.prototype.vc;\nY.prototype.Ch=function(a){return this.Ya(bq,a)};Y.prototype.getMapTileService=Y.prototype.Ch;Y.prototype.kh=function(a,b,c,d,e,f){var g=this.Ch(),h=this.Ch({type:\"aerial\"}),k=this.Zj(),l=this.Wj(),m={},p={crossOrigin:\"anonymous\"};Da(a)&&(f=a,\"crossOrigin\"in f&&(p.crossOrigin=f.crossOrigin),a=f.tileSize,b=f.ppi,c=f.lg,d=f.lg2,e=f.style,f=f.pois);var q=a||512;if(0>[72,250,320,500].indexOf(+b)){if(b!==B)throw new D(this.kh,1,b);}else m.ppi=+b;c&&(m.lg=c);d&&(m.lg2=d);e&&(m.style=e);f&&(m.pois=f);a=function(r,v,w,z,J){return r.vc(v,w,q,z,m,1,J,p)};b=l.nd(new Sh(l.eg(\"miami/normal.day\").toString()));\nUp(b.oa(),m.lg,m.lg2);c=l.nd(new Sh(l.eg(\"miami/truck.day\").toString()));Up(c.oa(),m.lg,m.lg2);l=k.Bj(m.lg?{lg:m.lg,i18n:!0}:void 0);return{vector:{normal:{map:b,truck:c,traffic:k.Aj(),trafficincidents:l}},raster:{normal:{xbase:a(g,\"xbasetile\",\"normal.day\",\"png8\",!1),xbasenight:a(g,\"xbasetile\",\"normal.night\",\"png8\",!0),base:a(g,\"basetile\",\"normal.day\",\"png8\",!1),basenight:a(g,\"basetile\",\"normal.night\",\"png8\",!0),map:a(g,\"maptile\",\"normal.day\",\"png8\",!1),mapnight:a(g,\"maptile\",\"normal.night\",\"png8\",\n!0),trafficincidents:l,transit:a(g,\"maptile\",\"normal.day.transit\",\"png8\",!1),labels:a(g,\"labeltile\",\"normal.day\",\"png\",!1)},satellite:{xbase:a(h,\"xbasetile\",\"hybrid.day\",\"jpg\",!0),base:a(h,\"basetile\",\"hybrid.day\",\"jpg\",!0),map:a(h,\"maptile\",\"hybrid.day\",\"jpg\",!0),labels:a(h,\"labeltile\",\"hybrid.day\",\"png\",!0)},terrain:{xbase:a(h,\"xbasetile\",\"terrain.day\",\"jpg\",!1),base:a(h,\"basetile\",\"terrain.day\",\"jpg\",!1),map:a(h,\"maptile\",\"terrain.day\",\"jpg\",!1),labels:a(h,\"labeltile\",\"terrain.day\",\"png\",!1)}}}};\nY.prototype.createDefaultLayers=Y.prototype.kh;function dq(){this.a={}}dq.prototype.Cb=function(a,b){var c=a+b,d;if(d=this.a[c])return d;a=eq.MARKER.replace(\"{{icon}}\",fq[a]||fq.OTHER);a=a.replace(\"{{color}}\",gq[b]||gq.BLOCKING);b={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Ki(Li.POLYGON,hq.MARKER)};return this.a[c]=d=new Hj(a,b)};\nvar eq={MARKER:'<svg width=\"26\" height=\"33\" enable-background=\"new 0 0 26 33\" viewBox=\"0 0 26 33\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m26 33h-26v-33h26z\" fill=\"#8c8c8c\" opacity=\"0\"/><path d=\"m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026\" fill=\"#878787\" opacity=\".6\"/><path d=\"m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z\" fill=\"{{color}}\"/>{{icon}}</svg>'},fq=\n{CONGESTION:'<path style=\"fill:#FFFFFF;\" d=\"M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z\"/>',\nROADWORKS:'<path d=\"m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z\" fill=\"#fff\"/>',\nACCIDENT:'<path style=\"fill:#FFFFFF;\" d=\"M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z\"/>',\nOTHER:'<path style=\"fill:#FFFFFF;\" d=\"M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z\"/>'},\ngq={BLOCKING:\"#323232\",VERYHIGH:\"#d5232f\",HIGH:\"#ffa100\"},hq={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function iq(a,b,c){c=c?c:{};c.criticality||(c.criticality=\"major,critical\");C(a,jq,iq,0);Bn.call(this,{max:20,min:8,requestData:A(this.V,this)});this.s=new dq;this.C=a;this.a=c;this.reload=A(this.reload,this);this.v=setInterval(this.reload,b||18E4)}u(iq,Bn);t(\"H.service.traffic.incidents.Provider\",iq);iq.prototype.c={minor:\"HIGH\",\"low impact\":\"HIGH\",major:\"VERYHIGH\",critical:\"BLOCKING\"};\niq.prototype.V=function(a,b,c,d,e){var f=this,g=this.c,h=this.s;return this.C.requestIncidentsByTile(a,b,c,function(k){var l=[];k=k.TRAFFIC_ITEMS;var m;if(k)for(k=k.TRAFFIC_ITEM,m=k.length;m--;){var p=k[m];var q=p.TRAFFIC_ITEM_TYPE_DESC;switch(q){case \"ACCIDENT\":case \"CONGESTION\":var r=q;break;case \"CONSTRUCTION\":r=\"ROADWORKS\";break;default:r=\"OTHER\"}r=h.Cb(r,g[p.CRITICALITY.DESCRIPTION]);q=p.LOCATION.GEOLOC.ORIGIN;q=new zn({lat:q.LATITUDE,lng:q.LONGITUDE},{provider:f,icon:r});q.setData(p);l.push(q)}d(l)},\ne,this.a)};iq.prototype.B=function(){Bn.prototype.B.call(this);clearInterval(this.v)};var kq=\"A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A\".split(\" \");function lq(a,b){var c={};this.a=a;Wa(c,b||c);bk.call(this,c);this.Ag={};a=this.Pb(Pg.SPATIAL);a.update(a.a+1,Mg.ADD)}u(lq,bk);t(\"H.service.remote.ObjectProvider\",lq);lq.prototype.B=function(){bk.prototype.B.call(this)};lq.prototype.Lc=function(){return ff};lq.prototype.requestMarkers=lq.prototype.Lc;lq.prototype.Kc=function(){return ff};lq.prototype.requestDomMarkers=lq.prototype.Kc;lq.prototype.Dd=function(){return ff};lq.prototype.requestOverlays=lq.prototype.Dd;lq.prototype.Vb=df;\nlq.prototype.providesMarkers=lq.prototype.Vb;lq.prototype.Ub=df;lq.prototype.providesDomMarkers=lq.prototype.Ub;lq.prototype.Jc=df;lq.prototype.providesSpatials=lq.prototype.Jc;lq.prototype.Bg=function(){return ff};lq.prototype.requestSpatials=lq.prototype.Bg;function mq(a){return a.Dc(!0)}lq.prototype.Cg=function(a,b){a=nq(this,a,oq);b&&(a=a.filter(mq));return a};lq.prototype.requestSpatialsByTile=lq.prototype.Cg;\nfunction nq(a,b,c){var d=b.j&&b.j[c],e;!d&&(e=b.m)&&(delete b.m,(b.j=a=a.a.parse(a,b,e))&&(d=a[c]));return d||ff}lq.prototype.da=function(a){var b=a.fb();if(this.Ag[b])throw new Yc(this.da,\"Remote object \"+b+\" already added\");return this.Ag[b]=a};lq.prototype.Ha=function(a){delete this.Ag[a.fb()]};var oq=\"spatials\";function pq(a,b,c){pq.l.constructor.call(this,{min:qq,max:rq});C(a,jq,pq,0);this.s=a;this.a=c||sq;this.a.responseattributes=\"sh,fc\";this.c=setInterval(A(this.reload,this),b||18E4);this.Rc(new Sh(a.eg().toString()),!0)}u(pq,R);t(\"H.service.traffic.flow.Provider\",pq);pq.prototype.ta=function(){return this.ub()};pq.prototype.getStyle=pq.prototype.ta;pq.prototype.qc=function(a){a.b&&a.b(\"GeoJSONTileSource\");this.Rc(a)};pq.prototype.setStyle=pq.prototype.qc;var sq={locationreferences:\"tmc,shp\"};\npq.prototype.u=function(){pq.l.u.call(this);clearInterval(this.c)};pq.prototype.F=function(a,b,c,d,e){return this.s.requestFlowByTile(a,b,c,function(f){f.type&&-1!==f.type.indexOf(\"Error\")?e(f.Details):d(f)},e,this.a)};pq.prototype.requestInternal=pq.prototype.F;\npq.prototype.od=function(a,b,c,d,e){var f,g,h,k,l={type:\"FeatureCollection\",features:[]},m;var p=d.RWS.length;for(f=0;f<p;f++){var q=d.RWS[f];var r=q.RW;var v=r.length;var w=-1!==kq.indexOf(q.EXTENDED_COUNTRY_CODE+q.EBU_COUNTRY_CODE);for(q=0;q<v;q++){var z=r[q].FIS;var J=z.length;for(z=0;z<J;z++){var G=r[q].FIS[z].FI;var W=G.length;for(g=0;g<W;g++){var V=G[g];var va=[];var ea=V.CF[0];var dc=!!ea.SSS;var sb={type:\"Feature\",properties:ea,geometry:{type:\"MultiLineString\",coordinates:va}};sb.properties.LHT=\nw;V.SHP.length&&(sb.properties.FC=V.SHP[0].FC);dc&&(m=[]);for(ea=0;ea<V.SHP.length;ea++){var gd=V.SHP[ea].value;var ti=gd.length;for(h=0;h<ti;h++){var Me=dc?m:void 0,Tb=new ao(gd[h].trim()),Uf=[],Xc={};for(Tb.ue();-1!==(k=Tb.Sb());)k===tq?(Xc.lat=+String.fromCharCode.apply(pq,Tb.Rd()),Tb.next(),Tb.ue()):k===uq?(Xc.lng=+String.fromCharCode.apply(pq,Tb.Rd()),Uf.push([Xc.lng,Xc.lat]),Me&&Me.push(Zf(Xc)),Xc=[],Tb.next(),Tb.ue()):Tb.next();Xc.lng=+String.fromCharCode.apply(pq,Tb.Rd());Uf.push([Xc.lng,\nXc.lat]);Me&&Me.push(Zf(Xc));k=Uf;va.push(k)}}l.features.push(sb)}}}}return pq.l.od.call(this,a,b,c,l,e)};pq.prototype.createTileInternal=pq.prototype.od;var rq=21,qq=10,uq=32,tq=44;function vq(a){function b(m){d.contains(e)&&d.removeChild(e);l&&clearTimeout(l);delete vq.a[f];m&&a.Lj&&a.Lj.call(k,m)}if(!a.url||!a.fh)throw Error('Parameter \"options\" must specify at least a URL and a callback.');if(\"function\"!==typeof a.fh)throw Error(\"Parameters options.callback must be a function\");var c=a.rp||document;var d=c.getElementsByTagName(\"head\")[0];var e=c.createElement(\"script\");c=a.url instanceof X?a.url:Gp(a.url,a.qp);var f=vq.b++;var g=a.am||\"callback\";var h=a.fh;var k={};var l=\nnull;k.id=f;k.cancel=function(){b(\"cancelled\")};0!==a.timeout&&(l=x.setTimeout(function(){b(\"timeout\")},a.timeout||3E4));vq.a[f]=function(m){b();h.call(k,m)};e.type=\"text/javascript\";e.src=c.toString()+(c.ek()?\"&\":\"?\")+g+\"=\"+(a.sp?\"H.service.jsonp.handleResponse(\"+f+\")\":encodeURI(\"H.service.jsonp.handleResponse(\"+f+\")\"));d.appendChild(e);return k}t(\"H.service.jsonp\",vq);vq.Pn=function(a){return(a=vq.a[a])?a:function(){}};vq.handleResponse=vq.Pn;vq.b=0;vq.a={};function jq(a){jq.l.constructor.call(this,jq,a);this.bm=Cp(this,a).callbackKey}u(jq,Bp);t(\"H.service.traffic.Service\",jq);jq.prototype.a=function(){return{subDomain:\"traffic.ls\",path:\"traffic/6.1\",callbackKey:\"jsoncallback\"}};jq.CONFIG_KEY=\"traffic\";jq.prototype.Aj=function(a){return new ml(new pq(this,void 0,a),{max:22})};jq.prototype.createFlowLayer=jq.prototype.Aj;jq.prototype.Bj=function(a){return new Cn(new iq(this,void 0,a))};jq.prototype.createIncidentsLayer=jq.prototype.Bj;\nfunction wq(a,b,c,d){return vq({url:b,fh:c,Lj:function(e){d(Error(\"[\"+e+\"] \"+b+\" request failed\"))},am:a.bm})}jq.prototype.Oo=function(a,b,c){a=this.D().clone().G(\"incidents.json\").K(a);return wq(this,a,b,c)};jq.prototype.requestIncidents=jq.prototype.Oo;jq.prototype.No=function(a,b,c,d,e,f){a=this.D().clone().G([\"flow/json\",c,a,b].join(\"/\")).K(f||{});return wq(this,a,d,e)};jq.prototype.requestFlowByTile=jq.prototype.No;\njq.prototype.Po=function(a,b,c,d,e,f){a=this.D().clone().G([\"incidents/json\",c,a,b].join(\"/\")).K(f||{});return wq(this,a,d,e)};jq.prototype.requestIncidentsByTile=jq.prototype.Po;jq.prototype.eg=function(){return Op().G(\"traffic/flow.yaml\")};Y.prototype.Zj=function(a){return this.Ya(jq,a)};Y.prototype.getTrafficService=Y.prototype.Zj;function xq(a){xq.l.constructor.call(this,xq,a);this.fl=Cp(this,a).reverseSubDomain}u(xq,Bp);t(\"H.service.GeocodingService\",xq);xq.prototype.a=function(){return{subDomain:\"geocoder.ls\",reverseSubDomain:\"reverse\",path:\"6.2\"}};xq.CONFIG_KEY=\"geocoding\";xq.prototype.b=function(a){return Error(a.Details||a.message||a.error)};xq.prototype.th=function(a,b,c){a=this.D().clone().G(\"geocode.json\").K(a);return this.F(a,b,c)};xq.prototype.geocode=xq.prototype.th;\nxq.prototype.Di=function(a,b,c){a=this.D().clone().G(\"reversegeocode.json\").K(a);this.fl&&a.Ra(this.fl);return this.F(a,b,c)};xq.prototype.reverseGeocode=xq.prototype.Di;xq.prototype.search=function(a,b,c){a=this.D().clone().G(\"search.json\").K(a);return this.F(a,b,c)};xq.prototype.search=xq.prototype.search;Y.prototype.Om=function(a){return this.Ya(xq,a)};Y.prototype.getGeocodingService=Y.prototype.Om;function yq(a){yq.l.constructor.call(this,yq,a)}u(yq,Bp);t(\"H.service.PlacesService\",yq);yq.prototype.a=function(){return{subDomain:\"places.ls\",path:\"places/v1\"}};yq.CONFIG_KEY=\"places\";yq.EntryPoint={SEARCH:\"discover/search\",SUGGEST:\"suggest\",EXPLORE:\"discover/explore\",AROUND:\"discover/around\",HERE:\"discover/here\",CATEGORIES:\"categories/places\"};yq.prototype.request=function(a,b,c,d){return this.wa(a,b,c,d)};\nyq.prototype.wa=function(a,b,c,d){a=this.D().clone().G(a).K(b||{});return this.F(a,c,d)};yq.prototype.search=function(a,b,c){return this.wa(\"discover/search\",a,b,c)};yq.prototype.search=yq.prototype.search;yq.prototype.Zo=function(a,b,c){return this.wa(\"suggest\",a,b,c)};yq.prototype.suggest=yq.prototype.Zo;yq.prototype.lm=function(a,b,c){return this.wa(\"discover/explore\",a,b,c)};yq.prototype.explore=yq.prototype.lm;yq.prototype.Wl=function(a,b,c){return this.wa(\"discover/around\",a,b,c)};\nyq.prototype.around=yq.prototype.Wl;yq.prototype.Rn=function(a,b,c){return this.wa(\"discover/here\",a,b,c)};yq.prototype.here=yq.prototype.Rn;yq.prototype.cm=function(a,b,c){return this.wa(\"categories/places\",a,b,c)};yq.prototype.categories=yq.prototype.cm;yq.prototype.nm=function(a,b,c,d){a=Gp(a).K(this.D().getQuery()).K(d||{});return this.F(a,b,c)};yq.prototype.follow=yq.prototype.nm;Y.prototype.nn=function(a){return this.Ya(yq,a)};Y.prototype.getPlacesService=Y.prototype.nn;function zq(a){zq.l.constructor.call(this,zq,a)}u(zq,Bp);t(\"H.service.iml.Service\",zq);zq.prototype.a=function(){return{host:\"interactive.data.api.platform.here.com\",path:\"interactive/v1/catalogs\"}};zq.prototype.b=function(a){return Error(Da(a)?a.errorMessage:a)};zq.prototype.td=function(a,b,c,d,e){Aq(this.td,0,a,b);Bq(this.td,2,c,d);a=this.D().clone().G(a+\"/layers/\"+b+\"/statistics\").K(e||{});return this.F(a,c,d)};zq.prototype.getStatistics=zq.prototype.td;\nzq.prototype.Zf=function(a,b,c,d,e,f,g,h,k){var l=k?\"\":\".mvtf\";a=this.D().clone().G(d+\"/layers/\"+e+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+l).K(Object.assign({clip:!0},h));return this.F(a,k?f:function(m){return m.arrayBuffer().then(f)},g,k?\"application/json\":\"arraybuffer\")};zq.prototype.getFeaturesByTile=zq.prototype.Zf;\nzq.prototype.Xf=function(a,b,c,d,e,f){wc(a,\"String\",this.Xf,0,\"must be a string\");Aq(this.Xf,1,b,c);Bq(this.Xf,3,d,e);a=this.D().clone().G(b+\"/layers/\"+c+\"/features/\"+a).K(f||{});return this.F(a,d,e)};zq.prototype.getFeatureById=zq.prototype.Xf;\nzq.prototype.hc=function(a,b,c,d,e,f){if(!Array.isArray(a)||0===a.length||a.some(function(g){return\"string\"!==typeof g}))throw new D(this.hc,0,\"must be a non-empty array of strings\");Aq(this.hc,1,b,c);Bq(this.hc,3,d,e);a=this.D().clone().G(b+\"/layers/\"+c+\"/features\").K(Object.assign({},f,{id:new Kp(a)}));return this.F(a,d,e)};zq.prototype.getFeaturesById=zq.prototype.hc;\nzq.prototype.dd=function(a,b,c,d,e){if(!Da(a)||!(a.bbox||a.north&&a.east&&a.south&&a.west))throw new D(this.dd,0,'must be an object with either \"bbox\" or a full set of \"north\", \"east\", \"south\" and \"west\"');Aq(this.dd,1,b,c);Bq(this.dd,3,d,e);a=this.D().clone().G(b+\"/layers/\"+c+\"/bbox\").K(a);return this.F(a,d,e)};zq.prototype.getFeaturesByBoundingBox=zq.prototype.dd;\nzq.prototype.Yf=function(a,b,c,d,e){if(!(Da(a)&&a.radius&&(a.lat&&(a.lng||a.lon)||a.refCatalogHrn&&a.refLayerId&&a.refFeatureId)))throw new D(this.Yf,0,'must be an object with \"radius\" and a combination of either \"lat\"+\"lng\" or \"refCatalogHrn\"+\"refLayerId\"+\"refFeatureId\"');Aq(this.Yf,1,b,c);Bq(this.Yf,3,d,e);a=this.D().clone().G(b+\"/layers/\"+c+\"/spatial\").K(a);return this.F(a,d,e)};zq.prototype.getFeaturesByPointAndRadius=zq.prototype.Yf;\nzq.prototype.Te=function(a,b,c,d,e,f){if(!Da(a)||!a.radius)throw new D(this.Te,0,'must be an object with \"radius\"');if(!Da(b))throw new D(this.Te,1,\"must be a GeoJSON object\");Aq(this.Te,2,c,d);Bq(this.Te,4,e,f);a=this.D().clone().G(c+\"/layers/\"+d+\"/spatial\").K(a);b={method:\"POST\",data:JSON.stringify(b),headers:Object.assign({\"Content-Type\":\"application/geo+json\"},this.cf)};b=new rf(\"application/json\",a.toString(),fe,b);b.then(e,Ep(this,a,f));return b};\nzq.prototype.getFeaturesByGeometryAndRadius=zq.prototype.Te;zq.prototype.Fi=function(a,b,c,d,e){Aq(this.Fi,0,a,b);Bq(this.Fi,2,c,d);a=this.D().clone().G(a+\"/layers/\"+b+\"/search\").K(e||{});return this.F(a,c,d)};zq.prototype.searchFeatures=zq.prototype.Fi;zq.prototype.Uh=function(a,b,c,d,e){Aq(this.Uh,0,a,b);Bq(this.Uh,2,c,d);a=this.D().clone().G(a+\"/layers/\"+b+\"/iterate\").K(e||{});return this.F(a,c,d)};zq.prototype.iterateFeatures=zq.prototype.Uh;zq.CONFIG_KEY=\"iml\";\nfunction Aq(a,b,c,d){wc(c,\"String\",a,b,\"must be a string\");wc(d,\"String\",a,b+1,\"must be a string\")}function Bq(a,b,c,d){if(!Ca(c))throw new D(a,b,\"must be a function\");if(!Ca(d))throw new D(a,b+1,\"must be a function\");}Y.prototype.Tm=function(a){return this.Ya(zq,a)};Y.prototype.getIMLService=Y.prototype.Tm;function Cq(a,b,c,d){Cq.l.constructor.call(this,d?{min:d.min,max:d.max}:void 0);C(a,zq,Cq,0);if(!zc(b))throw new D(Cq,1,'\"catalogHrn\" must be a string');if(!zc(c))throw new D(Cq,2,'\"layerId\" must be a string');this.v=a;this.a=b;this.c=c;this.s=Da(d)&&Da(d.parameters)?d.parameters:{};this.Rc(new Sh({sources:{iml:{type:\"MVT\"}},layers:{iml:{data:{source:\"iml\",layer:this.a+\":\"+this.c},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,order:200,color:\"#92CF48\",size:[[10,\"8px\"],[14,\"12px\"],[18,\n\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#0258AE\",width:\"2px\",join:\"round\",cap:\"round\"}}}}}}))}u(Cq,R);t(\"H.service.iml.Provider\",Cq);Cq.prototype.F=function(a,b,c,d,e){return this.v.Zf(a,b,c,this.a,this.c,d,e,this.s)};Cq.prototype.requestInternal=Cq.prototype.F;Cq.prototype.ta=function(){return this.ub()};Cq.prototype.getStyle=Cq.prototype.ta;\nCq.prototype.qc=function(a){a.b(\"MVT\");this.Rc(a)};Cq.prototype.setStyle=Cq.prototype.qc;function Dq(a){Dq.l.constructor.call(this,Dq,a)}u(Dq,Bp);t(\"H.service.publicTransit.Service\",Dq);Dq.prototype.a=function(){return{subDomain:\"transit.router\",path:\"v8\"}};Dq.CONFIG_KEY=\"publicTransit\";Dq.prototype.xn=function(a,b,c){a=this.D().clone().G(\"routes\").K(a);return this.F(a,b,c)};Dq.prototype.getRoutes=Dq.prototype.xn;Dq.prototype.Hm=function(a,b,c){a=this.D().clone().G(\"departures\").K(a);return this.F(a,b,c)};Dq.prototype.getDepartures=Dq.prototype.Hm;\nDq.prototype.Bn=function(a,b,c){a=this.D().clone().G(\"stations\").K(a);return this.F(a,b,c)};Dq.prototype.getStations=Dq.prototype.Bn;Dq.prototype.b=function(a){return Error(JSON.stringify(a))};Y.prototype.tn=function(a){return this.Ya(Dq,a)};Y.prototype.getPublicTransitService=Y.prototype.tn;function Eq(a){Eq.l.constructor.call(this,Eq,a)}u(Eq,Bp);t(\"H.service.RoutingService\",Eq);Eq.prototype.a=function(){return{subDomain:\"route.ls\",path:\"routing/7.2\"}};Eq.prototype.b=function(a){return Error(a.details)};Eq.CONFIG_KEY=\"routing\";Eq.prototype.Md=function(a,b,c){a=this.D().clone().G(\"calculateroute.json\").K(a);return this.F(a,b,c)};Eq.prototype.calculateRoute=Eq.prototype.Md;\nEq.prototype.$l=function(a,b,c){a=this.D().clone().Ra(\"isoline\").G(\"calculateisoline.json\").K(a);return this.F(a,b,c)};Eq.prototype.calculateIsoline=Eq.prototype.$l;function Fq(a){Fq.l.constructor.call(this,Fq,a)}u(Fq,Bp);t(\"H.service.RoutingService8\",Fq);Fq.CONFIG_KEY=\"routing_v8\";Fq.prototype.a=function(){return{subDomain:\"router\",path:\"v8/routes\"}};Fq.prototype.b=function(a){return Error(a.error)};Fq.prototype.Md=function(a,b,c){a=this.D().clone().K(a);return this.F(a,b,c)};Fq.prototype.calculateRoute=Fq.prototype.Md;Y.prototype.Xj=function(a,b){b=+b||7;if(7===b)b=Eq;else if(8===b)b=Fq;else throw new D(this.Xj,1,\"allowed values are 7 and 8\");return this.Ya(b,a)};Y.prototype.getRoutingService=Y.prototype.Xj;function Gq(){}t(\"H.service.extension.dataView.ITable\",Gq);Gq.prototype.Yd=function(){};Gq.prototype.getMeta=Gq.prototype.Yd;Gq.prototype.ae=function(){};Gq.prototype.getRowCount=Gq.prototype.ae;Gq.prototype.Bc=function(){};Gq.prototype.getRow=Gq.prototype.Bc;Gq.prototype.Ta=function(){};Gq.prototype.getColumnNames=Gq.prototype.Ta;Gq.prototype.Pe=function(){};Gq.prototype.getColumn=Gq.prototype.Pe;Gq.prototype.xa=function(){};Gq.prototype.getCell=Gq.prototype.xa;Gq.prototype.concat=function(){};\nGq.prototype.concat=Gq.prototype.concat;function Hq(){}t(\"H.service.extension.dataView.IRow\",Hq);Hq.prototype.Ta=function(){};Hq.prototype.getColumnNames=Hq.prototype.Ta;Hq.prototype.xa=function(){};Hq.prototype.getCell=Hq.prototype.xa;Hq.prototype.ud=function(){};Hq.prototype.getTable=Hq.prototype.ud;function Iq(a,b){this.a=a;this.b=b}t(\"H.service.extension.dataView.ObjRow\",Iq);Iq.prototype.Ta=function(){return this.a.Ta()};Iq.prototype.getColumnNames=Iq.prototype.Ta;Iq.prototype.xa=function(a){return this.a.xa(this.b,a)};Iq.prototype.getCell=Iq.prototype.xa;Iq.prototype.ud=function(){return this.a};Iq.prototype.getTable=Iq.prototype.ud;function Jq(){}t(\"H.service.extension.dataView.IColumn\",Jq);Jq.prototype.xa=function(){};Jq.prototype.getCell=Jq.prototype.xa;function Kq(a,b){this.b=a;this.a=b}t(\"H.service.extension.dataView.ObjColumn\",Kq);Kq.prototype.xa=function(a){return this.b.xa(a,this.a)};Kq.prototype.getCell=Kq.prototype.xa;function Lq(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):B);this.Hb=a;if(b)for(this.Nd=b,this.hh=a=mc(),d=b.length;d--;)a[b[d]]=!0;c!==B&&(this.mi=c)}t(\"H.service.extension.dataView.ObjTable\",Lq);n=Lq.prototype;n.mi=B;n.Hb=B;n.Nd=B;n.hh=B;n.Yd=function(){return this.mi};Lq.prototype.getMeta=Lq.prototype.Yd;Lq.prototype.ae=function(){return this.Hb?this.Hb.length:0};Lq.prototype.getRowCount=Lq.prototype.ae;Lq.prototype.Bc=function(a){var b=this.Hb;return b&&b[a]?new Iq(this,a):B};\nLq.prototype.getRow=Lq.prototype.Bc;Lq.prototype.Ta=function(){return this.Nd||ff};Lq.prototype.getColumnNames=Lq.prototype.Ta;Lq.prototype.Pe=function(a){return this.hh[a]?new Kq(this,a):B};Lq.prototype.getColumn=Lq.prototype.Pe;Lq.prototype.xa=function(a,b){var c=this.Hb;return(a=c&&this.hh[b]&&c[a])&&a[b]};Lq.prototype.getCell=Lq.prototype.xa;\nLq.prototype.concat=function(){var a=arguments.length,b,c=this.Nd,d=\"\"+this.Nd,e=(this.Hb||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof Lq))throw new D(this.concat,b);if(f.Hb){if(c&&\"\"+f.Nd!==d)throw new D(this.concat,b,\"Incompatible columns!\");e=e.concat(f.Hb)}}return new Lq(e,this.Nd,this.mi)};Lq.prototype.concat=Lq.prototype.concat;function Mq(a,b){a.Hb?a.Hb.push(b):a.Hb=[b];return a.Hb.length-1};function Nq(a){var b=Oq;if(!a||!zc(Ze(a.layerId,a.layer))||!Cc(a.level)||tc(a.rowFilter)&&!Ca(a.rowFilter)||tc(a.rowFilterContext)&&!Da(a.rowFilterContext))throw new D(b,1,tc(\"invalid layer config\")?\"invalid layer config\":a);};function Pq(a,b,c,d){d=d||Qq;this.qf={};d.provider=a;this.invalidate=ef;Pq.l.constructor.call(this,b,d);delete this.invalidate;c&&(this.b=c);this.va(Mg.ADD)}u(Pq,ah);t(\"H.service.remote.Spatial\",Pq);var Qq={};Pq.prototype.fb=function(){return this.b||ah.prototype.fb.call(this)};Pq.prototype.getId=Pq.prototype.fb;Pq.prototype.Eg=Function();Pq.prototype.retain=Pq.prototype.Eg;Pq.prototype.release=Function();Pq.prototype.release=Pq.prototype.release;function Rq(a,b){this.a=a;b&&(this.b=b)}\nvar Sq=new Rq([]);Pq.prototype.Wd=function(a){return(this.qf[a.key]||Sq).a};Pq.prototype.getGeometriesForTile=Pq.prototype.Wd;Pq.prototype.Bh=function(a){return(this.qf[a.key]||Sq).b};Pq.prototype.getLabels=Pq.prototype.Bh;function Tq(a,b,c){a.qf[b.key]=new Rq(c,void 0)};function Uq(a,b,c,d,e,f){Vq(Uq,1,b,c);Vq(Uq,2,d,e);(this.f=a.length)?(this.s=a,this.$=b,this.i=c,this.b=0,this.c=A(this.c,this),this.o=d,this.j=e,this.a=mc(),Wa(this.a,Wq,f||{}),this.g={},x.setTimeout(this.c,0)):b(ff,!0)}var Wq={duration:100,rm:\"geometry\",qm:\"WKT\",Qo:\"searchAttributes\",Ej:B};\nUq.prototype.c=function(){var a=[];var b=!1;for(var c=Ak(),d;this.b<this.f;){var e=this.s[this.b];b=e.attributes;d=e.layerId||this.a.Ej;e.distance&&(b[this.a.Qo]={nearest:new Xf(e.nearestLat,e.nearestLon),distance:e.distance});if(e=e[this.a.rm]){try{var f=Gn(new ao(e))}catch(g){this.i(new x.Error(g.message));b=!0;break}b[this.a.qm]=f}(e=this.g[d])||(e=this.g[d]=this.o({layerId:d,columnNames:Object.keys(b)}));b=this.j(e,b);a.push(b);this.b++;if((b=this.b===this.f)||Ak()-c>=this.a.duration){this.$(a,\nb);break}}b?this.g=y:this.m=x.setTimeout(this.c,0)};Uq.prototype.cancel=function(){x.clearTimeout(this.m);this.b<this.f&&this.i(new x.Error(\"parsing canceled\"))};Uq.prototype.cancel=Uq.prototype.cancel;function Vq(a,b,c,d){if(!Ca(c))throw new D(a,b,\"has invalid type\");if(!Ca(d))throw new D(a,b+1,\"has invalid type\");};function Xq(a,b,c){var d=8===a;this.b=b;this.c=c||id;(this.a=4===a||d)?this.j=d:this.g=1===a;this.f=this.a?\"$HProjGeometry\":\"geometry\"}\nXq.prototype.parse=function(a,b,c){var d,e,f={},g=[],h,k;var l=0;for(h=c.length;l<h;l++){var m=c[l];var p=m.Rows;if(m=p.length){var q=Object.keys(p[0]).filter(function(v){return\"geometry\"!==v&&\"$HProjGeometry\"!==v});q=new Lq(p,q);for(k=0;k<m;k++){var r=p[k];if(e=r[this.f]){if(delete r[this.f],r=q.Bc(k))try{this.a?d=Yq(this,a,b,r,e):d=Zq(this,a,r,e.path),d.ia(a),g.push(d)}catch(v){this.c(v.message)}}else this.c(\"Layer must contain geometries\")}}}f[this.a?\"spatials\":this.g?\"markers\":\"domMarkers\"]=\ng;return f};function Yq(a,b,c,d,e){var f=[],g=e.paths,h=g.length,k=0,l=a.b&&a.b(d);for(a=new Pq(b,a.j,B,{style:l||a.i,data:d});k!==h;)f.push($q(g[k++]));Tq(a,c,[new qh(f,e.interiorsIndex,e.outlinesIndex)]);return a}function Zq(a,b,c,d){d=new Xf(d[0],d[1]);var e=a.b&&a.b(c);a.g?(a={icon:e,data:c,provider:b},a=new zn(d,a)):(a={icon:e,data:c,provider:b},a=new Pi(d,a));return a}function $q(a){for(var b=0,c=a.length,d=[];b<c;)d.push(new I(a[b++],a[b++]));return d};function ar(a){a=a||{};var b=a.tileCacheSize||1024,c=a.resultType,d=a.styleCallback;tc(a.min)||(a.min=12);ar.l.constructor.call(this,a);if(-1===br.indexOf(c))throw new D(ar,2,\"invalid resultType\");this.a=c;if(d&&!Ca(d))throw new D(ar,2,\"invalid style callback\");this.Aa=d;this.V=a.pixelRatio||Se();this.Lb=A(this.Lb,this);this.O(new Ek(b,A(this.bc,this)));this.createTileInternal=4===c||8===c?A(this.N,this):A(this.J,this)}u(ar,R);t(\"H.service.extension.TileProvider\",ar);ar.prototype.c=!1;\nar.prototype.j=function(){return ar.l.j.call(this)|192};ar.prototype.ib=function(a,b,c,d){return this.c?ar.l.ib.call(this,a,b,c,d):B};ar.prototype.requestTile=ar.prototype.ib;ar.prototype.Lb=function(a){this.dispatchEvent(new td(\"error\",zc(a)?a:a+\"\",this))};ar.prototype.Vb=function(){return 1===this.a};ar.prototype.providesMarkers=ar.prototype.Vb;ar.prototype.Ub=function(){return 2===this.a};ar.prototype.providesDomMarkers=ar.prototype.Ub;ar.prototype.Jc=function(){return 4===this.a||8===this.a};\nar.prototype.providesSpatials=ar.prototype.Jc;function cr(a){var b=a.yb;b||(a.v||(a.v=a.s(a.a,a.Aa,a.Lb)),b=a.yb=new lq(a.v),b.ia(a),b.addEventListener(a.g.Ea,A(a.jb,a)),b.yb=!0);return b}ar.prototype.J=function(a,b,c,d){var e=this.getTileKey(a,b,c);e=this.Ob().get(e);var f=2==this.a,g=[],h=cr(this);e?e.valid=!0:(a=e=new Mk(a,b,c,y),delete a.j,a.m=d);d=f?nq(h,e,\"domMarkers\"):nq(h,e,\"markers\");for(b=d.length;b--;)a=d[b],a.dj=e,(f||1===a.Cb().getState())&&g.push(a);e.data=g;return e};\nar.prototype.jb=function(a){if(a=a.target.dj)a.valid=!1};ar.prototype.Uo=function(a){this.C=!!a};ar.prototype.setTileCanvasRendering=ar.prototype.Uo;ar.prototype.C=!0;ar.prototype.N=function(a,b,c,d){var e=cr(this),f=this.getTileKey(a,b,c),g=this.tileSize,h=this.Ob().get(f);h||(a=h=new Qk(f,a,b,c,g,this.V,c,e),delete a.j,a.m=d);this.C?(d=Np.pop(g),h.U(d)||Np.push(d,g)):Wk(h);return h};\nar.prototype.bc=function(a,b){var c;if(4===this.a||8===this.a){a=b.Ua();for(c=a.length;c--;)delete a[c].qf[b.key];b.data&&(Np.push(b.yg(),this.tileSize),b.zg())}else for(a=b.data,c=a.length;c--;)delete a[c].dj};ar.prototype.u=function(){ar.l.u.call(this);cr(this).B()};var dr={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};ar.ResultType=dr;var br=[1,2,4,8];function Oq(a,b,c){var d=this,e=b&&b.rowFilter,f=c.resultType;Oq.l.constructor.call(this,c);C(a,er,Oq,0);Nq(b);e?(c=Ua(b),c.rowFilter=e.toString()):c=Ua(b);delete c.layer;c.layerId=Ze(b.layerId,b.layer);(new Mf).a(\"pde\",\"H.service.extension.worker.processor\");a=a.D().clone().G(fr+\".\"+gr).K({meta:1});(new Pf(\"pde\",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===f,serverUrl:a.toString(),layerConfigs:[c],horizontalMargin:1}]})).then(function(){d.c=!0;Uj(d)},this.Lb)}\nu(Oq,ar);t(\"H.service.extension.platformData.TileProvider\",Oq);Oq.prototype.s=function(a,b,c){a=new Xq(a,b,c);a.i=hr;return a};var hr=new O({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0,lineJoin:\"round\",lineCap:\"round\"});\nOq.prototype.F=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Ob().get(g);var k={cancel:id},l=!0,m=this.a;g&&(4===m||8===m?g.fe()||(d(Np.pop(this.tileSize),null),l=!1):(d(y),l=!1));if(l){var p=Lp.setTimeout(function(){h=new Pf(\"pde\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():Lp.clearTimeout(p)}}return k};Oq.prototype.requestInternal=Oq.prototype.F;Oq.prototype.u=function(){Oq.l.u.call(this);new Pf(\"pde\",{message:[this.uid,3]})};\nOq.ResultType=dr;function ir(a){this.a=a}ir.prototype.cancel=function(){for(var a=this.a,b=a.length;b--;)a[b].cancel();a.length=0};function er(a){er.l.constructor.call(this,er,a)}u(er,Bp);t(\"H.service.extension.platformData.Service\",er);er.prototype.a=function(){return{subDomain:\"s.fleet.ls\",path:\"1\"}};er.CONFIG_KEY=\"platformData\";er.prototype.request=function(a,b,c,d,e){return this.wa(a,b,c,d,e)};\ner.prototype.wa=function(a,b,c,d,e){var f=\"text/plain\";if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);if(!d)throw new D(this.request,3,d);if(!e)throw new D(this.request,4,e);a=this.D().clone().G(a+\".\"+b).K(c);b===jr.JSON&&(f=\"application/json\");return this.F(a,d,e,f)};var fr=\"tiles\";\ner.EntryPoint={DOC_ATTRIBUTES:\"doc/attributes\",DOC_LAYER:\"doc/layer\",DOC_LAYERS:\"doc/layers\",DOC_MAPS:\"doc/maps\",DOC_INDEXES:\"doc/indexes\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SERVICE_CONFIGURATION:\"serviceconfiguration\",STATIC:\"static\",TILE:\"tile\",TILES:fr,FILE:\"file\",INDEX:\"index\"};var gr=\"json\",jr={TXT:\"txt\",JSON:gr,HTML:\"html\",BIN:\"bin\"};er.EntryPointType=jr;\ner.prototype.vc=function(a,b){var c=b&&b.resultType;a=new Oq(this,a,b);var d;1==c||2===c?d=new Cn(a):d=new ml(a);return d};er.prototype.createTileLayer=er.prototype.vc;er.prototype.Fd=function(a,b,c,d){var e=[],f,g=b.layer_id||b.layer_ids;a=this.request(a,gr,b,function(h){f=new Uq(h.geometries,c,d,function(k){return new Lq([],k.columnNames,k)},function(k,l){return k.Bc(Mq(k,l))},{Ej:g});e.push(f)},function(h){d(new x.Error(h))});e.push(a);return new ir(e)};\nfunction kr(a,b,c){if(!yc(a))throw new D(c,0,\"has invalid type\");if(!yc(b))throw new D(c,1,\"has invalid type\");if(a.length!==b.length||!a.length)throw new D(c,1,\"specify one key attribute for each given layer id in the same order\");}\ner.prototype.Mc=function(a,b,c,d,e,f){function g(l,m){m&&h--;d(l,!h)}var h,k=[];kr(a,b,this.Mc);Vq(this.Mc,3,d,e);C(c,K,this.Mc,2);c={bbox:c.ja+\",\"+c.ba+\";\"+c.la+\",\"+c.ga};f&&Wa(c,f);a=c.layer_id?[c.layer_id]:a;f=0;for(h=a.length;f<h;f++)c.layer_id=a[f],c.key_attribute=b[f],k.push(this.Fd(\"search/bbox\",c,g,e));return new ir(k)};er.prototype.searchByBoundingBox=er.prototype.Mc;\ner.prototype.Xb=function(a,b,c,d,e,f,g){kr(a,b,this.Xb);C(c,Xf,this.Xb,2,\"has invalid type\");if(!Cc(d))throw new D(this.Xb,3,\"has invalid type\");Vq(this.Xb,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),proximity:c.lat+\",\"+c.lng+\",\"+d};g&&Wa(a,g);return this.Fd(\"search/proximity\",a,e,f)};er.prototype.searchByProximity=er.prototype.Xb;\ner.prototype.Wb=function(a,b,c,d,e,f,g){var h=\"\";kr(a,b,this.Wb);if(!zc(c)&&!C(c,L))throw new D(this.Wb,1,\"has invalid type\");if(!Cc(d))throw new D(this.Wb,2,\"has invalid type\");Vq(this.Wb,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),radius:d};if(zc(c))a.route_id=c;else{d=c.X;c=0;for(b=d.length;c<b;c+=3)h+=d[c]+\",\"+d[c+1],c<b-3&&(h+=\";\");a.corridor=h}g&&Wa(a,g);return this.Fd(\"search/corridor\",a,e,f)};er.prototype.searchByCorridor=er.prototype.Wb;\nY.prototype.on=function(a){return this.Ya(er,a)};Y.prototype.getPlatformDataService=Y.prototype.on;function lr(a){lr.l.constructor.call(this,lr,a)}u(lr,Bp);t(\"H.service.extension.geofencing.Service\",lr);lr.prototype.a=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};lr.CONFIG_KEY=\"geofencing\";lr.prototype.request=function(a,b,c,d){return this.wa(a,b,c,d)};lr.prototype.b=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a.message||a.response_code)};\nlr.prototype.wa=function(a,b,c,d){if(!a)throw new D(this.request,0,a);if(!Ca(c))throw new TypeError(\"onResult must be a function\");if(!Ca(d))throw new TypeError(\"onError must be a function\");a=this.D().clone().G(a+\".json\").K(b);return this.F(a,c,d)};lr.EntryPoint={SEARCH_PROXIMITY:\"search/proximity\"};Y.prototype.Pm=function(a){return this.Ya(lr,a)};Y.prototype.getGeofencingService=Y.prototype.Pm;t(\"H.service.extension.customLocation.Permission\",{READ:\"read\",WRITE:\"write\",EXPORT:\"export\"});t(\"H.service.extension.customLocation.Storage\",{READONLY:\"readonly\",UPDATABLE:\"updatable\"});function mr(a){var b=nr;if(!a||!zc(a.layerId)||tc(a.rowFilter)&&!Ca(a.rowFilter)||tc(a.rowFilterContext)&&!Da(a.rowFilterContext))throw new D(b,1,tc(\"invalid layer config\")?\"invalid layer config\":a);}function or(a){return zc(a)&&/^[A-Z][A-Z0-9_]*$/.test(a)}function pr(a){for(var b=a&&a.length,c=2<=b&&\"WKT\"===a[--b]&&\"GEOMETRY_ID\"===a[--b];c&&b--;)c=or(a[b]);return c}\nfunction qr(a,b){var c=\"\",d,e,f=[];if(!b){var g={};f=[];if(a.geometries)for(e=0;e<a.geometries.length;e++)b=a.geometries[e],g[b.layerId]||(g[b.layerId]=[]),g[b.layerId].push(b);for(d in g)f.push({layerId:d,geometries:g[d]});for(d=0;d<f.length;d++)c+=qr(f[d],f[d].layerId)}else if(a.geometries&&a.geometries.length)for(e=Object.keys(a.geometries[0].attributes),c=c+(\"Meta:\\t\"+b+\"\\n\")+e.join(\"\\t\"),c+=\"\\tWKT\\n\",d=0;d<a.geometries.length;d++){var h=a.geometries[d].attributes;g=a.geometries[d].geometry;for(b=\n0;b<e.length;b++)f.push(h[e[b]]);c+=f.join(\"\\t\");c+=\"\\t\"+g+\"\\n\";f=[]}return c};function nr(a,b,c){var d=this,e=b&&b.rowFilter,f;nr.l.constructor.call(this,c);C(a,rr,nr,0);var g=c.resultType;mr(b);if(e){var h=Ua(b);h.rowFilter=e.toString()}else h=b;(new Mf).a(\"cle\",\"H.service.extension.worker.processor\");var k=b.layerId;a.request(sr,tr,{detail_level:\"all\",layer_id:k},function(l){l=l.layers;var m;for(m=0;m<l.length;m++)if(l[m].layerId===k){h.level=l[m].level;break}f=a.D().clone().G(ur+\".\"+tr).K({meta:1});(new Pf(\"cle\",{message:[d.uid,0,{tileSize:d.tileSize,projected:!0,onlyOutline:4===\ng,serverUrl:f.toString(),layerConfigs:[h],batchTiles:!1,horizontalMargin:1}]})).then(function(){d.c=!0;Uj(d)},d.Lb)},function(l){d.Lb(l.message)})}u(nr,ar);t(\"H.service.extension.customLocation.TileProvider\",nr);nr.prototype.s=function(a,b,c){return new Xq(a,b,c)};\nnr.prototype.F=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Ob().get(g);var k={cancel:id},l=!0,m=this.a;g&&(4===m||8===m?g.fe()||(d(Np.pop(this.tileSize),null),l=!1):(d(y),l=!1));if(l){var p=Lp.setTimeout(function(){h=new Pf(\"cle\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():Lp.clearTimeout(p)}}return k};nr.prototype.requestInternal=nr.prototype.F;nr.prototype.u=function(){nr.l.u.call(this);new Pf(\"cle\",{message:[this.uid,3]})};function vr(){if(wr)throw new Yc(vr);}t(\"H.service.extension.customLocation.Table\",vr);var wr=!0;function xr(a,b){var c;wr=!1;var d=new vr;wr=!0;d.c=pc(x.JSON.parse(x.JSON.stringify(a)));a=a.columnNames;var e=mc();for(c=a.length;c--;)e[a[c]]=c;d.f=e;d.b=a.length;if(b){if(b.length%a.length)throw new D(xr,1,\"Invalid number of cells\");}else b=[];d.a=b;return d}vr.prototype.Yd=function(){return this.c};vr.prototype.getMeta=vr.prototype.Yd;vr.prototype.ae=function(){return this.a.length/this.b};\nvr.prototype.getRowCount=vr.prototype.ae;vr.prototype.Bc=function(a){return a<this.a.length/this.b?new yr(this,a):B};vr.prototype.getRow=vr.prototype.Bc;vr.prototype.yn=function(){var a=this.a.length/this.b,b,c=new x.Array(a);for(b=0;b<a;b++)c[b]=new yr(this,b);return c};vr.prototype.getRows=vr.prototype.yn;vr.prototype.Xg=function(a){var b=this.b,c=this.a,d=c.length/this.b;if(!a||a.length%b)throw new D(this.Xg,0,\"Invalid number of cells\");this.a=c.concat(a);return d};vr.prototype.addCells=vr.prototype.Xg;\nvr.prototype.Tl=function(){for(var a=this.b,b=this.a,c=this.a.length/this.b;a--;)b.push(y);return this.Bc(c)};vr.prototype.addRow=vr.prototype.Tl;vr.prototype.Ta=function(){return this.c.columnNames};vr.prototype.getColumnNames=vr.prototype.Ta;vr.prototype.Pe=function(a){return this.f[a]===B?B:new zr(this,a)};vr.prototype.getColumn=vr.prototype.Pe;vr.prototype.xa=function(a,b){return this.a[a*this.b+this.f[b]]};vr.prototype.getCell=vr.prototype.xa;\nvr.prototype.Nc=function(a,b,c){b=this.f[b];if(a>=this.a.length/this.b)throw new D(this.Nc,0,\"Row index out of bounds\");if(b===B)throw new D(this.Nc,0,\"Column unknown\");this.a[a*this.b+b]=c};vr.prototype.setCell=vr.prototype.Nc;\nvr.prototype.concat=function(a){var b=arguments.length,c,d=\"\"+this.Ta(),e=this.a?this.a.slice():[];for(c=0;c<b;c++){var f=arguments[c];if(!(f instanceof vr))throw new D(this.concat,c);if(\"\"+f.Ta()!==d)throw new D(this.concat,c,\"Incompatible columns!\");f.a&&(e=e.concat(f.a))}return xr(this.c,e)};vr.prototype.concat=vr.prototype.concat;var Ar=/(\\n|\\t|\\r|\")/;\nvr.prototype.$i=function(a,b){var c,d=this.b,e=this.Ta(),f=[],g=[],h=this.a,k=-1;for(c=0;c<d;c++)if(!a||a.test(e[c]))\"WKT\"===e[c]&&(k=f.length),f.push(c);if(!(a=f.length))throw new D(this.$i,1,\"No columns filtered\");Br(this,g,e,0,d,f,a,k);if(b){var l=b.length;for(c=0;c<l;c++)g.push(\"\\n\"),e=b[c],Br(this,g,h,e,d,f,a,k)}else for(l=this.ae(),e=0;e<l;e++)g.push(\"\\n\"),Br(this,g,h,e,d,f,a,k);return g.join(\"\")};\nfunction Br(a,b,c,d,e,f,g,h){var k;for(k=0;k<g;k++){k&&b.push(\"\\t\");var l=c[d*e+f[k]];if(k!==h){if(l!==y){l=String(l);if(Ar.test(l))throw new D(a.$i,0,'Invalid character (\\\\n, \\\\r, \\\\t, or \") in row '+d+\" column \"+a.c.columnNames[f[k]]);b.push(l)}}else b.push(l)}}function zr(a,b){this.b=a;this.a=b}vr.Column=zr;zr.prototype.xa=function(a){return this.b.xa(a,this.a)};zr.prototype.getCell=zr.prototype.xa;zr.prototype.Nc=function(a,b){this.b.Nc(a,this.a,b)};zr.prototype.setCell=zr.prototype.Nc;\nfunction yr(a,b){this.a=a;this.ji=b}vr.Row=yr;yr.prototype.Ta=function(){return this.a.Ta()};yr.prototype.getColumnNames=yr.prototype.Ta;yr.prototype.xa=function(a){return this.a.xa(this.ji,a)};yr.prototype.getCell=yr.prototype.xa;yr.prototype.Nc=function(a,b){this.a.Nc(this.ji,a,b)};yr.prototype.setCell=yr.prototype.Nc;yr.prototype.ud=function(){return this.a};yr.prototype.getTable=yr.prototype.ud;function Cr(a){if(a===B)a=\"\\t\";else if(!/^[^\"\\r\\n]$/.test(a))throw new D(Cr,0);this.b=String(a).charCodeAt(0);this.ki=A(this.ki,this);this.A=Dr}var Dr=0;n=Cr.prototype;n.getState=function(){return this.A};function Er(a,b,c){var d=a.A;if(d!==b)throw 1===d&&(a.A=Dr),new Yc(c,\"Requires state: \"+[\"READY\",\"PARSE\",\"PAUSE\"][b]+\" but found \"+[\"READY\",\"PARSE\",\"PAUSE\"][d]);}n.abort=function(){Er(this,2,Cr.prototype.abort);this.A=Dr};\nn.ki=function(a){this.A=Dr;throw new D(Cr.prototype.parse,0,\"Malformed DSV at row \"+this.a.j+\" column \"+this.a.b+\": \"+a);};function Fr(a,b){var c=[];a.parse(b,function(d,e,f){1>d&&(c[e]=f);return 0<d});a.A=Dr;return c}n.parse=function(a,b,c){Er(this,Dr,Cr.prototype.parse);a=a.trim();this.a=new Gr(a,this.b,this.ki);this.c=b;this.Ik=c||ef;this.A=2;this.resume()};n.Ik=ef;\nn.resume=function(){var a=this.a,b=[];Er(this,2,Cr.prototype.resume);this.A=1;do{if(!a.g){this.A=Dr;break}if(e>a.b){if(void 0!==c&&c!==e){this.a.a(\"The number of columns must be the same for all rows\");return}var c=e}var d=a.j;var e=a.b;var f=a.Kf;var g=this.Ik(d,e,a);if(a.Kf>f)for(;-1!==a.next(););else{for(;-1!==(f=a.next());)b.push(f);g=String.fromCharCode.apply(y,b);b.length=0}Hr(a);this.c(d,e,g)&&(this.A=a.g?2:Dr)}while(1===this.A);2!=this.A&&void 0!==c&&0<e&&c!==e&&this.a.a(\"The number of columns must be the same for all rows\")};\nfunction Gr(a,b,c){this.c=new ao(a);this.m=b;this.g=!0;this.Kf=this.j=this.b=0;Hr(this);this.a=c;this.f=[];this.i=!1}n=Gr.prototype;n.Kf=0;function Hr(a){var b=a.c.Sb();a.o=!1;(a.$=34===b)&&a.c.next()}function Ir(a,b){var c=a.c;a.o=!0;switch(b){case a.m:a.b++;break;case 13:c.next(),10!==c.Sb()&&a.a(\"CR without LF\");case 10:a.b=0;a.j++;break;case -1:a.g=!1;break;default:a.a(\"End of field expected\")}c.next();return-1}\nn.Sb=function(){if(this.o)var a=-1;else{var b=this.c;a=b.Sb();if(this.$)switch(a){case 34:b.next();a=b.Sb();34!==a&&(a=Ir(this,a));break;case -1:this.a(\"Closing quotation mark expected\")}else switch(a){case 34:this.a(\"Unexpected quotation mark\");case this.m:case 13:case 10:case -1:a=Ir(this,a)}}return a};n.ue=function(){this.i=!0;this.f=[]};n.Rd=function(){var a=this.f.slice();this.i=!1;this.f=[];return a};n.next=function(){var a=this.Sb();-1!==a&&this.c.next();this.i&&this.f.push(a);this.Kf++;return a};function Jr(a,b,c,d){d=d||{};if(!b)throw new D(Jr,1,\"has to be a function\");if(!c)throw new D(Jr,2,\"has to be a function\");this.c=b;this.g=c;this.a=[];this.i=d.duration||Kr;this.b=A(this.b,this);this.f={};a=a.split(\"Meta:\\t\").slice(1);for(b=0;b<a.length;b++){d=a[b].split(\"\\n\");c=d[0].split(\"\\t\")[0];d=d.slice(1).join(\"\\n\");this.Qd[c]=new Cr;this.ii[c]=Fr(this.Qd[c],d);var e={layerId:c,columnNames:this.ii[c]};this.Wh.push(c);this.f[c]=xr(e);this.Sc[c]=Ak();Lr(this,d,c);this.b(c)}}var Kr=100;n=Jr.prototype;\nn.ii={};n.Wh=[];n.Qd={};n.Sc={};n.Zi={};function Lr(a,b,c){var d=[],e=a.ii[c].length-1,f=a.f[c];try{a.Qd[c].parse(b,function(g,h,k){var l=!1;0<g&&(d[h]=k,h===e&&(a.a.push(f.Bc(f.Xg(d))),Ak()-a.Sc[c]>a.i&&(l=!0)));return l},function(g,h,k){if(0<g&&h===e)return Gn(k)})}catch(g){a.g(g)}}n.cancel=function(){for(var a in this.Zi)x.clearTimeout(this.Zi[a])};Jr.prototype.cancel=Jr.prototype.cancel;\nJr.prototype.b=function(a){var b=this,c,d;this.Zi[a]=x.setTimeout(function(){if(2===b.Qd[a].getState())b.Sc[a]=Ak(),b.c(b.a,!1),b.a=[],b.Qd[a].resume(),b.b(a);else{c=!0;for(d=0;d<b.Wh.length;d++)if(b.Qd[b.Wh[d]].getState()!==Dr){c=!1;break}c&&(0<b.a.length&&b.c(b.a,!0),b.a=[])}},0)};function rr(a){rr.l.constructor.call(this,rr,a)}u(rr,Bp);t(\"H.service.extension.customLocation.Service\",rr);rr.prototype.a=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};rr.CONFIG_KEY=\"customLocation\";rr.prototype.vc=function(a,b){var c=b&&b.resultType;a=new nr(this,a,b);var d;1===c||2===c?d=new Cn(a):d=new ml(a);return d};rr.prototype.createTileLayer=rr.prototype.vc;\nfunction Mr(a,b,c,d){var e;a=a===Nr?\"changes\":\"file\";var f=b[a],g=zc(f),h=!g&&C(f,Blob);if(!g&&!h)throw new D(d,0,\"Invalid \"+a+\" parameter\");if(Or)h?e=f:e=nf(f,\"text/plain\"),d=new x.FormData,d.append(a,e,e.name||a+\".wkt\"),c.method=\"POST\",c.data=d,delete b[a];else if(h)throw new D(d,0,\"Sending Blob data is not supported by the browser\");}var Or=x.FormData&&!!x.FormData.prototype.append;rr.prototype.request=function(a,b,c,d,e){return this.wa(a,b,c,d,e)};\nrr.prototype.wa=function(a,b,c,d,e){var f=\"text/plain\",g=a===Pr.LAYERS_UPLOAD||a===Pr.LAYERS_MODIFY||a===Pr.LAYERS_IMPORT,h=c,k={data:B,method:\"GET\",headers:this.cf};if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);Vq(this.request,3,d,e);g&&(C(c,Object,this.request,2,\"Invalid request parameters\"),h=Ua(c),Mr(a,h,k,this.request));var l=this.D().clone().G(a+\".\"+b).K(h);b===Qr.JSON&&(f=\"application/json\");a=new rf(f,l.toString(),fe,k);a.then(function(m){var p=m.issues;p&&m.error_id&&\nm.response_code?e(Error(p[0].message)):d(m)},function(m){\"error\"===m.type||404===m.status?e(Error(m.statusText||\"Unable to load data\")):m.json().then(function(p){e(Error(\"[\"+p.issues[0].message+\"] \"+l+\" request failed\"))},function(){e(Error(\"[\"+m.statusText+\"] \"+l+\" request failed\"))})});return a};\nvar sr=\"layers/list\",Nr=\"layers/modify\",ur=\"tiled/tile\",Pr={LAYERS_DELETE:\"layers/delete\",LAYERS_GRANT:\"layers/access/grant\",LAYERS_LIST:sr,LAYERS_MODIFY:Nr,LAYERS_UPLOAD:\"layers/upload\",LAYERS_IMPORT:\"layers/import\",SEARCH_ALL:\"search/all\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SEARCH_TILE:ur};rr.EntryPoint=Pr;var tr=\"json\",Qr={TXT:\"txt\",JSON:tr};rr.EntryPointType=Qr;\nrr.prototype.tb=function(a,b,c){var d=this;return this.request(\"search/all\",\"txt\",{filter:'WKT==\"\"',layer_id:a},function(e){var f=e.replace(/[\\r\\n]+$/g,\"\").split(\"\\t\");d.request(sr,tr,{layer_id:a,detail_level:\"all\"},function(g){g=g.layers[0];g.columnNames=f;b(xr(g))},c)},c)};rr.prototype.getLayer=rr.prototype.tb;\nrr.prototype.ck=function(a,b,c,d){function e(){return++g<f?h.request(\"layers/access/grant\",tr,{layer_id:a,granted_app_id:b[g].grantedAppId,permissions:b[g].permissions.join(\",\")},e,d):h.tb(a,c,d)}var f=b&&b.length,g=-1,h=this;return e()};rr.prototype.grantAccess=rr.prototype.ck;rr.prototype.Fj=function(a,b,c){return this.request(\"layers/delete\",tr,{layer_ids:a},b,c)};rr.prototype.deleteLayer=rr.prototype.Fj;\nrr.prototype.nd=function(a,b,c){function d(){setTimeout(function(){k.tb(g,function(q){setTimeout(e.bind(null,q),m)},function(){64E3>l?(l+=m,d()):c(x.Error(\"Timeout\"))})},m);m*=2}function e(q){var r=JSON.stringify(q.Ta()),v=a.grants;if(r!==JSON.stringify(h)){var w=\"Results into different column names on the backend: \"+r;setTimeout(function(){k.Fj(g,function(){c(x.Error(w))},function(z){c(x.Error(w+\". \"+z.message))})},m)}else v&&v.length?k.ck(g,v,b,c):b(q)}var f,g,h,k=this,l=0,m=1E3;var p=!a||!or(g=\na.layerId)&&(f=\"layerId\")||!pr(h=a.columnNames)&&(f=\"columnNames\")?0:Ca(b)?Ca(c)?-1:2:1;if(0<=p)throw new D(k.nd,p,f||arguments[p]);return k.tb(g,function(){c(x.Error(\"Layer exists already\"))},function(){var q={layer_id:g,file:h.join(\"\\t\")},r=a.level,v=a.storage;r!==B&&(q.level=r);v!==B&&(q.storage=v);k.request(\"layers/upload\",tr,q,d,c)})};rr.prototype.createLayer=rr.prototype.nd;\nrr.prototype.Fd=function(a,b,c,d){var e=[],f;a=this.request(a,tr,b,function(g){g.geometries.length?(g=qr(g,b.layer_id),f=new Jr(g,c,d),e.push(f)):c(ff,!0)},d);e.push(a);return new ir(e)};rr.prototype.Xb=function(a,b,c,d,e,f){if(!yc(a))throw new D(this.Xb,0,\"has invalid type\");C(b,Xf,this.Xb,1,\"has invalid type\");if(!Cc(c))throw new D(this.Xb,2,\"has invalid type\");Vq(this.Xb,3,d,e);a={layer_ids:a.join(\",\"),proximity:b.lat+\",\"+b.lng+\",\"+c};f&&Wa(a,f);return this.Fd(\"search/proximity\",a,d,e)};\nrr.prototype.searchByProximity=rr.prototype.Xb;rr.prototype.Wb=function(a,b,c,d,e,f){var g=\"\";if(!yc(a))throw new D(this.Wb,0,\"has invalid type\");if(!zc(b)&&!C(b,L))throw new D(this.Wb,1,\"has invalid type\");if(!Cc(c))throw new D(this.Wb,2,\"has invalid type\");Vq(this.Wb,3,d,e);a={layer_ids:a.join(\",\"),radius:c};if(zc(b))a.route_id=b;else{var h=b.X;b=0;for(c=h.length;b<c;b+=3)g+=h[b]+\",\"+h[b+1],b<c-3&&(g+=\",\");a.corridor=g}f&&Wa(a,f);return this.Fd(\"search/corridor\",a,d,e)};\nrr.prototype.searchByCorridor=rr.prototype.Wb;rr.prototype.Mc=function(a,b,c,d,e){function f(k,l){l&&h--;c(k,!h)}var g=[],h;if(!yc(a))throw new D(this.Mc,0,\"has invalid type\");C(b,K,this.Mc,1,\"has invalid type\");Vq(this.Mc,2,c,d);b={bbox:b.ja+\",\"+b.ba+\";\"+b.la+\",\"+b.ga};e&&Wa(b,e);a=b.layer_id?[b.layer_id]:a;e=0;for(h=a.length;e<h;e++)b.layer_id=a[e],g.push(this.Fd(\"search/bbox\",b,f,d));return new ir(g)};rr.prototype.searchByBoundingBox=rr.prototype.Mc;\nrr.prototype.Ei=function(a,b,c,d){var e,f=[];if(!zc(a))throw new D(this.Ei,0,\"has invalid type\");Vq(this.Ei,1,b,c);var g={layer_id:a};d&&Wa(g,d);d=this.request(\"search/all\",tr,g,function(h){h.geometries.length?(h=qr(h,a),e=new Jr(h,b,c),f.push(e)):b(ff,!0)},c);f.push(d);return new ir(f)};rr.prototype.searchAll=rr.prototype.Ei;var Rr={\"delete\":/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};\nfunction Sr(a,b,c,d,e,f){function g(){v++;d(this,v===q)}function h(W){v++;e(W,this,v===q)}var k=\"append\"!==b,l,m={},p=mc(),q=0,r=[],v=0;if(!yc(c))throw new D(f,0,c);Vq(f,1,d,e);for(l=c.length;l--;){var w=c[l];if(C(w,yr)){var z=w.ud().Yd().layerId;var J=w.xa(\"GEOMETRY_ID\");if(k){if(J===y||\"\"===String(J))var G='GEOMETRY_ID must not be null or \"\"';m[J=z+\"_\"+J]&&(G=\"same GEOMETRY_ID for multiple rows\");m[J]=w}else J!==y&&\"\"!==String(J)&&(G='GEOMETRY_ID must be null or \"\"')}else G=\"Invalid type\";if(G)throw new D(f,\n0,\"- Invalid row at index \"+l+\", \"+G);J=p[z];J||(J=p[z]=[],q++);J.push(w)}for(z in p){J=p[z];c=[];for(l=J.length;l--;)c.push(J[l].ji);r.push(a.request(Nr,tr,{layer_id:z,action:b,changes:J[0].ud().$i(Rr[b]||null,c)},A(g,J),A(h,J)))}return new ir(r)}rr.prototype.xj=function(a,b,c){return Sr(this,\"append\",a,b,c,this.xj)};rr.prototype.appendRows=rr.prototype.xj;rr.prototype.Hl=function(a,b,c){return Sr(this,\"update\",a,b,c,this.Hl)};rr.prototype.updateRows=rr.prototype.Hl;\nrr.prototype.Gj=function(a,b,c){return Sr(this,\"delete\",a,b,c,this.Gj)};rr.prototype.deleteRows=rr.prototype.Gj;Y.prototype.Fm=function(a){return this.Ya(rr,a)};Y.prototype.getCustomLocationService=Y.prototype.Fm;function Tr(a){yq.l.constructor.call(this,Tr,a)}u(Tr,Bp);t(\"H.service.extension.customRoute.Service\",Tr);Tr.prototype.a=function(){return{subDomain:\"s.fleet.ls\",path:\"2\"}};Tr.CONFIG_KEY=\"customRoute\";Tr.prototype.b=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a)};Tr.prototype.Md=function(a,b,c){Vq(this.Md,1,b,c);a=this.D().clone().G(\"calculateroute.json\").K(a);return this.F(a,b,c)};Tr.prototype.calculateRoute=Tr.prototype.Md;\nY.prototype.Gm=function(a){return this.Ya(Tr,a)};Y.prototype.getCustomRoutingService=Y.prototype.Gm;function Ur(a){Ur.l.constructor.call(this,Ur,a)}u(Ur,Bp);t(\"H.service.SearchService\",Ur);Ur.CONFIG_KEY=\"search\";Ur.prototype.a=function(){return{subDomain:\"search\",path:\"v1\"}};Ur.prototype.b=function(a){a=[a.title,a.action,a.cause].filter(function(b){return b});return Error(a.join(\". \"))};Ur.prototype.th=function(a,b,c){a=this.D().clone().Ra(\"geocode\").G(\"geocode\").K(a);return this.F(a,b,c)};Ur.prototype.geocode=Ur.prototype.th;\nUr.prototype.Di=function(a,b,c){a=this.D().clone().Ra(\"revgeocode\").G(\"revgeocode\").K(a);return this.F(a,b,c)};Ur.prototype.reverseGeocode=Ur.prototype.Di;Ur.prototype.Xl=function(a,b,c){a=this.D().clone().Ra(\"autosuggest\").G(\"autosuggest\").K(a);return this.F(a,b,c)};Ur.prototype.autosuggest=Ur.prototype.Xl;Ur.prototype.fm=function(a,b,c){a=this.D().clone().Ra(\"discover\").G(\"discover\").K(a);return this.F(a,b,c)};Ur.prototype.discover=Ur.prototype.fm;\nUr.prototype.jo=function(a,b,c){a=this.D().clone().Ra(\"lookup\").G(\"lookup\").K(a);return this.F(a,b,c)};Ur.prototype.lookup=Ur.prototype.jo;Ur.prototype.Zl=function(a,b,c){a=this.D().clone().Ra(\"browse\").G(\"browse\").K(a);return this.F(a,b,c)};Ur.prototype.browse=Ur.prototype.Zl;Y.prototype.An=function(a){return this.Ya(Ur,a)};Y.prototype.getSearchService=Y.prototype.An;function Vr(a){this.g=!!a.toBypassToken;if(!this.g&&!a.token)throw new D(Vr,0,'\"token\" must be specified');Vr.l.constructor.call(this,Vr,a);this.j=a.token;this.i={};this.f={}}u(Vr,Bp);t(\"H.service.xyz.Service\",Vr);Vr.prototype.a=function(){return{host:\"xyz.api.here.com\",path:\"hub/spaces\"}};Vr.prototype.b=function(a){return Error(a.errorMessage||a.message)};\nVr.prototype.Fh=function(a,b,c){wc(a,\"String\",this.Fh,0,'\"projectId\" must be a string');Wr(this.Fh,1,b,c);a=Xr(this.D().clone().re(\"project-api/projects/\"+a));return this.F(a,b,c)};Vr.prototype.getProject=Vr.prototype.Fh;Vr.prototype.Yj=function(a,b,c){Wr(this.Yj,0,a,b);c=Yr(this,this.D().clone().K(c||{}));return this.F(c,a,b)};Vr.prototype.getSpaces=Vr.prototype.Yj;\nVr.prototype.dg=function(a,b,c){wc(a,\"String\",this.dg,0,'\"spaceId\" must be a string');Wr(this.dg,1,b,c);a=Yr(this,this.D().clone().G(a));return this.F(a,b,c)};Vr.prototype.getSpace=Vr.prototype.dg;Vr.prototype.td=function(a,b,c){wc(a,\"String\",this.td,0,'\"spaceId\" must be a string');Wr(this.td,1,b,c);a=Yr(this,this.D().clone().G(a+\"/statistics\"));return this.F(a,b,c)};Vr.prototype.getStatistics=Vr.prototype.td;\nVr.prototype.Zf=function(a,b,c,d,e,f,g){a=Yr(this,this.D().clone().G(d+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+\".mvtf\").K(Object.assign({clip:!0},g)));return this.F(a,function(h){return h.arrayBuffer().then(e)},f,\"arraybuffer\")};Vr.prototype.search=function(a,b,c,d){wc(a,\"String\",this.search,0,'\"spaceId\" must be a string');Wr(this.search,1,b,c);a=Yr(this,this.D().clone().G(a+\"/search\").K(d||{}));return this.F(a,b,c)};Vr.prototype.search=Vr.prototype.search;\nVr.prototype.hc=function(a,b,c,d){wc(a,\"String\",this.hc,0,'\"spaceId\" must be a string');if(!Da(b))throw new D(this.hc,1,'\"params\" must be an object');Wr(this.hc,2,c,d);a=Yr(this,this.D().clone().G(a+\"/features\").K(b));return this.F(a,c,d)};Vr.prototype.getFeaturesById=Vr.prototype.hc;\nVr.prototype.dd=function(a,b,c,d){wc(a,\"String\",this.dd,0,'\"spaceId\" must be a string');if(!Da(b))throw new D(this.hc,1,'\"params\" must be an object');Wr(this.dd,2,c,d);a=Yr(this,this.D().clone().G(a+\"/bbox\").K(b));return this.F(a,c,d)};Vr.prototype.getFeaturesByBoundingBox=Vr.prototype.dd;Vr.prototype.sa=function(a){var b=this.i[a];if(b)return b;this.f[a]||this.Me(a);return null};\nVr.prototype.lf=function(a,b,c,d,e){wc(a,\"String\",this.lf,0,'\"spaceId\" must be a string');if(!Da(b))throw new D(this.lf,1,'\"geojsonObject\" must be an object');Wr(this.lf,2,c,d);if(e&&!Da(e))throw new D(this.lf,4,'\"opt_params\" must be an object');return Zr(this,a,c,d,\"PUT\",b,e)};Vr.prototype.putFeatures=Vr.prototype.lf;\nVr.prototype.hf=function(a,b,c,d,e){wc(a,\"String\",this.hf,0,'\"spaceId\" must be a string');if(!Da(b))throw new D(this.hf,1,'\"featureCollection\" must be an object');Wr(this.hf,2,c,d);if(e&&!Da(e))throw new D(this.hf,4,'\"opt_params\" must be an object');return Zr(this,a,c,d,\"POST\",b,e)};Vr.prototype.postFeatures=Vr.prototype.hf;\nVr.prototype.Qf=function(a,b,c,d){wc(a,\"String\",this.Qf,0,'\"spaceId\" must be a string');if(!Da(b))throw new D(this.Qf,1,'\"params\" must be an object');Wr(this.Qf,2,c,d);return Zr(this,a,c,d,\"DELETE\",B,b)};Vr.prototype.deleteFeatures=Vr.prototype.Qf;\nfunction Zr(a,b,c,d,e,f,g){var h=Object.assign(a.g?{}:{authorization:\"Bearer \"+a.j},{\"Content-Type\":\"application/geo+json\"},a.cf);e={method:e,headers:h};f&&(e.data=JSON.stringify(f));b=Xr(a.D().clone().G(b+\"/features\").K(g||{}));f=new rf(\"application/json\",b.toString(),fe,e);f.then(c,Ep(a,b,d));return f}Vr.prototype.Me=function(a){var b=this;this.f[a]=$r;this.dg(a,function(c){b.f[a]=as;b.i[a]=c.copyright;b.dispatchEvent(\"copyrightupdate\")},function(c){b.f[a]=bs;throw c;})};\nfunction Yr(a,b){return a.g?b:Xr(b).K({access_token:a.j})}function Xr(a){var b=Object.assign({},a.getQuery());delete b.apikey;return a.Ri(b)}Vr.CONFIG_KEY=\"xyz\";var $r=1,as=2,bs=-1;function Wr(a,b,c,d){if(!Ca(c))throw new D(a,b,'\"onResult\" must be a function');if(!Ca(d))throw new D(a,b+1,'\"onError\" must be a function');}Y.prototype.Mn=function(a){return this.Ya(Vr,a)};Y.prototype.getXYZService=Y.prototype.Mn;function cs(a,b,c){var d;cs.l.constructor.call(this,c?{min:c.min,max:c.max}:void 0);C(a,Vr,cs,0);if(!zc(b))throw new D(cs,1,'\"spaceId\" must be a string');this.s=a;this.c=b;this.a={};if(c&&([\"limit\",\"simplificationLevel\",\"tags\"].forEach(function(e){e in c&&(this.a[e]=c[e])},this),a=c.parameters))for(d in a)this.a[d]=a[d];this.Rc(new Sh({sources:{xyz:{type:\"MVT\"}},layers:{xyz:{data:{source:\"xyz\",layer:this.c},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,order:200,color:\"#92CF48\",size:[[10,\n\"8px\"],[14,\"12px\"],[18,\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#000000\",width:\"2px\",join:\"round\",cap:\"round\"}}}}}}))}u(cs,R);t(\"H.service.xyz.Provider\",cs);cs.prototype.F=function(a,b,c,d,e){return this.s.Zf(a,b,c,this.c,d,e,this.a)};cs.prototype.requestInternal=cs.prototype.F;cs.prototype.sa=function(){return this.s.sa(this.c)};\ncs.prototype.getCopyrights=cs.prototype.sa;cs.prototype.ta=function(){return this.ub()};cs.prototype.getStyle=cs.prototype.ta;cs.prototype.qc=function(a){a.b(\"MVT\");this.Rc(a)};cs.prototype.setStyle=cs.prototype.qc;t(\"H.service.buildInfo\",function(){return Ef(\"H-service\",\"1.24.0\",\"165e5dd\")});\n");